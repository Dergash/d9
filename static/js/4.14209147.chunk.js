(this.webpackJsonpd9=this.webpackJsonpd9||[]).push([[4],{36:function(e,A,t){e.exports=t(33)("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")},38:function(e,A,t){e.exports={placeholder:"PaperdollBam_placeholder__1YqD3"}},43:function(e,A,t){var r={"./CEFF1INV.BAM":[44,5],"./CHFC1INV.BAM":[45,6],"./CHFC2INV.BAM":[46,7],"./CHFC3INV.BAM":[47,8],"./CHFC4INV.BAM":[48,9],"./CHFF1INV.BAM":[49,10],"./CHFF2INV.BAM":[50,11],"./CHFF3INV.BAM":[51,12],"./CHFF4INV.BAM":[52,13],"./CHFT1INV.BAM":[53,14],"./CHFT2INV.BAM":[54,15],"./CHFW1INV.BAM":[55,16],"./CHFW2INV.BAM":[56,17],"./CHFW3INV.BAM":[57,18],"./CHFW4INV.BAM":[58,19],"./CHMC1INV.BAM":[59,20],"./CHMC2INV.BAM":[60,21],"./CHMC3INV.BAM":[61,22],"./CHMC4INV.BAM":[62,23],"./CHMF1INV.BAM":[63,24],"./CHMF2INV.BAM":[64,25],"./CHMF3INV.BAM":[65,26],"./CHMF4INV.BAM":[66,27],"./CHMT1INV.BAM":[67,28],"./CHMT2INV.BAM":[68,29],"./CHMW1INV.BAM":[69,30],"./CHMW2INV.BAM":[70,31],"./CHMW3INV.BAM":[71,32],"./CHMW4INV.BAM":[72,33],"./CIFC1INV.BAM":[73,34],"./CIFC2INV.BAM":[74,35],"./CIFC3INV.BAM":[75,36],"./CIFC4INV.BAM":[76,37],"./CIFF1INV.BAM":[77,38],"./CIFF2INV.BAM":[78,39],"./CIFF3INV.BAM":[79,40],"./CIFF4INV.BAM":[80,41],"./CIFT1INV.BAM":[81,42],"./CIFT2INV.BAM":[82,43],"./CIMC1INV.BAM":[83,44],"./CIMC2INV.BAM":[84,45],"./CIMC3INV.BAM":[85,46],"./CIMC4INV.BAM":[86,47],"./CIMF1INV.BAM":[87,48],"./CIMF2INV.BAM":[88,49],"./CIMF3INV.BAM":[89,50],"./CIMF4INV.BAM":[90,51],"./CIMT1INV.BAM":[91,52],"./CIMT2INV.BAM":[92,53],"./COLGRAD.BAM":[93,54],"./MPALETTE.bmp":[36]};function a(e){if(!t.o(r,e))return Promise.resolve().then((function(){var A=new Error("Cannot find module '"+e+"'");throw A.code="MODULE_NOT_FOUND",A}));var A=r[e],a=A[0];return Promise.all(A.slice(1).map(t.e)).then((function(){return t.t(a,7)}))}a.keys=function(){return Object.keys(r)},a.id=43,e.exports=a},94:function(e,A,t){"use strict";t.r(A),t.d(A,"PaperdollBam",(function(){return H}));var r=t(4),a=t(0),n=t.n(a),i=t(34),o=t(35),s=t(6),d=function(){function e(A,t,r,a){Object(i.a)(this,e),this.name=A,this.header=t,this.palette=r,this.frames=a}return Object(o.a)(e,[{key:"decompressFrames",value:function(){var e=this;this.frames.forEach((function(A){A.compressed&&A.data&&(A.data=function(e,A){for(var t=new DataView(e),r=[],a=0;a<t.byteLength;a++)if(t.getUint8(a)===A){for(var n=t.getUint8(a+1)+1,i=0;i<n;i++)r.push(A);a+=1}else r.push(t.getUint8(a));return new Uint8Array(r)}(A.data,e.header.compressedColorIndex),A.compressed=!1)}))}},{key:"combineFrames",value:function(){var e=this;this.applyPaddedDimensions();var A=this.frames.reduce((function(e,A){var t=e.paddedWidth,r=void 0===t?0:t,a=e.paddedHeight,n=void 0===a?0:a,i=A.paddedWidth,o=void 0===i?0:i,s=A.paddedHeight;return{width:r<o?o:r,height:n+(void 0===s?0:s)}})),t=A.width*A.height,r=new Uint8Array(t);this.frames.forEach((function(t,a){e.putFrameInSprite(r,A,t,a)})),this.frames=[{data:r,width:A.width,height:A.height}]}},{key:"putFrameInSprite",value:function(e,A,t,r){for(var a=this.getFrameRange(r,A),n=a.start,i=a.end,o=this.getFramePadding(t,A),s=o.horizontal,d={start:n+o.vertical,end:i},l=n;l<d.start;l++)e[l]=this.header.compressedColorIndex;this.putImageInSprite(e,d,t,s)}},{key:"putImageInSprite",value:function(e,A,t,r){for(var a=0,n=r,i=0,o=A.start;o<A.end;o++)0!==n?(e[o]=this.header.compressedColorIndex,n--):(e&&(e[o]=t.data?new Uint8Array(t.data)[i]:0),i++,a++),a===t.width&&(n=r,a=0)}},{key:"applyPaddedDimensions",value:function(){this.frames=this.frames.map((function(e){var A,t,r,a;return Object(s.a)({},e,{paddedWidth:(null!==(A=e.centerX)&&void 0!==A?A:0)<0?Math.abs(null!==(t=e.centerX)&&void 0!==t?t:0)+e.width:e.width,paddedHeight:(null!==(r=e.centerY)&&void 0!==r?r:0)<0?Math.abs(null!==(a=e.centerY)&&void 0!==a?a:0)+e.height:e.height})}))}},{key:"getFrameRange",value:function(e,A){for(var t,r=0,a=0;a<e;a++){var n=this.frames[a],i=n.paddedWidth,o=void 0===i?0:i,s=n.paddedHeight;r+=o*(void 0===s?0:s)}return{start:r,end:r+A.width*(null!==(t=this.frames[e].paddedHeight)&&void 0!==t?t:0)}}},{key:"getFramePadding",value:function(e,A){var t;return{horizontal:A.width-e.width,vertical:A.width*((null!==(t=e.paddedHeight)&&void 0!==t?t:0)-e.height)}}}]),e}();var l=8,c=10,h=11,u=12,C=16,I=20,f=function(){function e(){Object(i.a)(this,e),this.signature=""}return Object(o.a)(e,[{key:"parse",value:function(e,A){var t=this.parseHeader(A),r=this.parseFrames(A,t),a=this.parsePalette(A,t.paletteOffset,t.frameLookupTableOffset);return new d(e,t,a,r)}},{key:"parseHeader",value:function(e){for(var A=new DataView(e),t=new Uint8Array(8),r=0;r<8;r++)t[r]=A.getUint8(r);var a=new TextDecoder("utf-8").decode(t);if("BAM V1  "===a)return this.signature=a,{frameEntriesCount:A.getUint16(l,!0),cyclesCount:A.getUint8(c),compressedColorIndex:A.getUint8(h),frameEntriesOffset:A.getUint32(u,!0),paletteOffset:A.getUint32(C,!0),frameLookupTableOffset:A.getUint32(I,!0)};throw new Error("Unknown format: ".concat(a))}},{key:"parsePalette",value:function(e,A,t){for(var r=new DataView(e),a=[],n=A;n<t-4;n+=4){var i=r.getUint8(n),o=r.getUint8(n+1),s=r.getUint8(n+2);a.push({red:i,green:o,blue:s})}return a}},{key:"parseFrames",value:function(e,A){for(var t=A.frameEntriesOffset,r=A.frameEntriesCount,a=new DataView(e),n=[],i=0;i<r;i++){var o=t+12*i,s={width:a.getUint16(o+0,!0),height:a.getUint16(o+2,!0),centerX:a.getInt16(o+4,!0),centerY:a.getInt16(o+6,!0),compressed:Boolean(a.getUint8(o+8+3)),data:null},d=a.getUint32(o+12-4,!0)<<1>>1;s.data=e.slice(d);var l=a.getUint32(o+12-4,!0)>>31;s.compressed=!l,n.push(s)}return n}}]),e}(),F=t(37),M={metal:4,minor:16,major:28,skin:40,leather:52,armor:64,hair:76},m=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,[{key:"setColors",value:function(e,A){var t=Object(F.a)(e);return Object.keys(A).forEach((function(e){if(A[e])for(var r=0;r<12;r++)t[M[e]+r]=A[e][r]})),t}},{key:"getTransparencyIndex",value:function(e){for(var A=0;A<e.length;A++)if(0===e[A].red&&255===e[A].green&&0===e[A].blue)return A;return 0}},{key:"parse",value:function(e){for(var A=new DataView(e),t=[],r=[],a=A.getUint8(10);a<e.byteLength;a+=3)r.push({blue:A.getUint8(a+2),green:A.getUint8(a+1),red:A.getUint8(a)}),12===r.length&&(t.push(r),r=[]);return t.reverse(),t}}]),e}(),B=function(){function e(A){Object(i.a)(this,e),this.BAMTexture=void 0,this.colors={hair:null,skin:null,major:null,minor:null,armor:null,leather:null,metal:null},this.BAMTexture=A}return Object(o.a)(e,[{key:"getAsBase64",value:function(){var e=new m,A=Object(F.a)(this.BAMTexture.palette),t=this.BAMTexture.frames[0],r=t.width,a=t.height,n=t.data,i=e.getTransparencyIndex(A);A=e.setColors(A,this.colors);var o=new Uint8Array(n),s=document.createElement("canvas");s.width=r,s.height=a;for(var d=s.getContext("2d"),l=d.createImageData(r,a),c=0;c<o.length;c++)l.data[4*c+0]=A[o[c]].blue,l.data[4*c+1]=A[o[c]].green,l.data[4*c+2]=A[o[c]].red,l.data[4*c+3]=o[c]===i?0:255;return d.putImageData(l,0,0),s.toDataURL("image/png")}}]),e}(),p=t(38),D=t.n(p),g=t(36),V=t.n(g),H=function(e){var A=n.a.useState(void 0),a=Object(r.a)(A,2),i=a[0],o=a[1];return t(43)("./".concat(e.paperdollName)).then((function(A){var t=(new f).parse("COLGRAD",A.default);t.decompressFrames(),t.frames.length>1&&t.combineFrames();var r=new B(t),a=(new m).parse(V.a);r.colors.skin=a[e.skin],r.colors.hair=a[e.hair],r.colors.major=a[e.major],r.colors.minor=a[e.minor],r.colors.leather=a[4];var n=r.getAsBase64();o(n)})).catch((function(e){console.error(e),o(null)})),n.a.createElement("div",null,i&&n.a.createElement("img",{src:i,alt:"Color icon"}),void 0===i&&n.a.createElement("div",{className:D.a.placeholder},"Loading..."),null===i&&n.a.createElement("div",{className:D.a.placeholder},"Not implemented"))};A.default=H}}]);
//# sourceMappingURL=4.14209147.chunk.js.map